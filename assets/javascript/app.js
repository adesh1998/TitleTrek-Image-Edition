var movies = [
    {
        id: 0,
        question: "&#x1F9D2;  &#x1F36B; &#x1F3ED;",
        answers:{
            a: "Willy Wonka's Chocolate Wonderland",
            b: "Charlie and the Chocolate Factory",
            c: "Charlie's Sweet Journey",
            d: "The Golden Ticket Quest",
        },
        correct: "Charlie and the Chocolate Factory",
        letter: "b",
    },

    {   id: 1,
        question: "&#x1F47D; &#x1F30E; &#x1F33F",
        answers:{
            a: "Avatar",
            b: "The Last Airbender",
            c: "Aviator",
            d: "Arrival",
        },
        correct: "Avatar",
        letter: "a",
    },


    {   id: 2,
        question: "&#x1F981; &#x1F451;",
        answers:{
            a: "Lion",
            b: "The Lion in Winter",
            c: "The Lion's Den",
            d: "The Lion King",
        },
        correct: "The Lion King",
        letter: "d",
           
    },

    {   
        id: 3,
        question: "&#x1F50D; &#x1F41F; &#x1F30A;",
        answers:{
            a: "Finding Dory",
            b: "Shark Tale",
            c: "Finding Nemo",
            d: "The Reef",
        },
        correct: "Finding Nemo",
        letter: "c",
           
    },

    {   
        id: 4,
        question: "&#x2620; &#x1F30A;",
        answers:{
            a: "At World's End",
            b: "Dead Man's Chest",
            c: "On Stranger Tides",
            d: "Pirates of the Caribbean",
        },
        correct: "Pirates of the Caribbean",
        letter: "d",
           
    },


    {
        id: 5,
        question: "&#x1F996; &#x1F33F; &#x1F3DE;",
        answers:{
            a: "Prehistoric Planet",
            b: "The Lost World",
            c: "Jurassic Park",
            d: "Carnosaur",
        },
        correct: "Jurassic Park",
        letter: "c",
           
    },

    {
        id: 6,
        question: "&#x1F916; &#x1F52B; &#x23F3;",
        answers:{
            a: "RoboCop",
            b: "I, Robot",
            c: "A.I. Artificial Intelligence",
            d: "The Terminator",
        },
        correct: "The Terminator",
        letter: "d",
           
    },

    {
        id: 7,
        question: "&#x2190; &#x1F697; &#x231B; &#x23F0;",
        answers:{
            a: "Bill & Ted's Excellent Adventure",
            b: "Hot Tub Time Machine",
            c: "Back to the Future",
            d: "Peggy Sue Got Married",
        },
        correct: "Back to the Future",
        letter: "c",
           
    },

    {
        id: 8,
        question: "&#128562; &#x1F9B8; &#x1F31F;",
        answers:{
            a: "Wonder Woman",
            b: "Cat Woman",
            c: "Elektra",
            d: "Captain Marvel",
        },
        correct: "Wonder Woman",
        letter: "a",
           
    },

    {
        id: 9,
        question: "&#x1FA86; &#x1F9F8; &#128214; &#128214;",
        answers:{
            a: "The Lego Movie",
            b: "Toy Story",
            c: "The Secret Life of Pets",
            d: "Small Soldiers",
        },
        correct: "Toy Story",
        letter: "b",
           
    },

    {
        id: 10,
        question: "&#x1F451; &#x1F64F; &#x1F48D; &#x1F48D;",
        answers:{
            a: "The Hobbit: An Unexpected Journey",
            b: "The Chronicles of Narnia: The Lion, the Witch and the Wardrobe",
            c: "The Lord of the Rings",
            d: "Stardust",
        },
        correct: "The Lord of the Rings",
        letter: "c",
           
    },

    {
        id: 11,
        question: "&#x1F575; &#x1F50D; &#x1F9E9;",
        answers:{
            a: "Enola Holmes",
            b: "The Adventures of Tintin",
            c: "Miss Peregrine's Home for Peculiar Children",
            d: "Sherlock",
        },
        correct: "Sherlock",
        letter: "d",
           
    },

    {
        id: 12,
        question: "&#x1F46B; &#x1F46B; &#x2615; &#x1F4FA;",
        answers:{
            a: "How I Met Your Mother",
            b: "The Big Bang Theory",
            c: "Friends",
            d: "4. New Girl",
        },
        correct: "Friends",
        letter: "c",
    },

    {
        id: 13,
        question: "&#x1F3E2; &#x1F4C1; &#x1F587;  &#x2615;",
        answers:{
            a: "Parks and Recreation",
            b: "Brooklyn Nine-Nine",
            c: "The Office",
            d: "Superstore",
        },
        correct: "The Office",
        letter: "c",
    },

    {
        id: 14,
        question: "&#x1F3AE; &#x1F5E1; &#x1F451;",
        answers:{
            a: "The Witcher",
            b: "Game of Thrones",
            c: "Vikings",
            d: "The Last Kingdom",
        },
        correct: "Game of Thrones",
        letter: "b",
    },

    {
        id: 15,
        question: "&#x1F454; &#x2660; &#x2663; &#x2665;&#x2666;",
        answers:{
            a: "The Good Wife",
            b: "White Collar",
            c: "Boston Legal",
            d: "Suits",
        },
        correct: "Suits",
        letter: "d",
    },

    {
        id: 16,
        question: "&#x26AB; &#x1FA9E;",
        answers:{
            a: "Black Mirror",
            b: "The Twilight Zone",
            c: "Electric Dreams",
            d: "The Outer Limits",
        },
        correct: "Black Mirror",
        letter: "a",
    },

    {
        id: 17,
        question: "&#x1F3E0; &#x1F0CF; &#x1F027; &#x1F028;",
        answers:{
            a: "Scandal",
            b: "House of Cards",
            c: "The West Wing",
            d: "Designated Survivor",
        },
        correct: "House of Cards",
        letter: "b",
    },

    {
        id: 18,
        question: "&#x1F6B6; &#x1F480; &#x1F6AB; &#x1F9DF;",
        answers:{
            a: "Z Nation",
            b: "Fear the Walking Dead",
            c: "The Walking Dead",
            d: "The Last Ship",
        },
        correct: "The Walking Dead",
        letter: "c",
    },

    {
        id: 19,
        question: "&#x1F4A5; &#x1F52C; &#x1F30C;",
        answers:{
            a: "Young Sheldon",
            b: "The IT Crowd",
            c: "Community",
            d: "The Big Bang Theory",
        },
        correct: "The Big Bang Theory",
        letter: "d",
    },
    {
        id: 20,
        question: "&#x1F478; &#x1F484; &#x1F485; &#x1F9DF; &#x1F9B9;",
        answers:{
            a: "Beauty and the Beast",
            b: "Cinderella",
            c: "The Little Mermaid",
            d: "Aladdin",
        },
        correct: "Beauty and the Beast",
        letter: "a",
    },

    {
        id: 21,
        question: "&#x1F9D9; &#x1F3F0; &#x1F989;&#x1FA84;&#x1F9F9;&#x26A1;&#x1F913;",
        answers:{
            a: "The Chronicles of Narnia: The Lion, the Witch and the Wardrobe",
            b: "Harry Potter and the Sorcerer's Stone",
            c: "The Golden Compass",
            d: "Eragon",
        },
        correct: "Harry Potter and the Sorcerer's Stone",
        letter: "b",
    },
    {
        id: 22,
        question: "&#x1F310; &#x1F465; &#x1F5A5;&#x1F4F1;",
        answers:{
            a: "Startup.com",
            b: "The Great Hack",
            c: "The Social Network",
            d: "The Circle",
        },
        correct: "The Social Network",
        letter: "c",
    },

    {
        id: 23,
        question: "&#x1F6A2; &#x1F9CA; &#x1F30A; &#x1F491;",
        answers:{
            a: "A Night to Remember",
            b: "The Poseidon Adventure",
            c: "3. Ghost Ship",
            d: "Titanic",
        },
        correct: "Titanic",
        letter: "d",
    },
    {
        id: 24,
        question: "&#x2744; &#x2603; &#x1F3F0;&#x1F478;&#x1F478;",
        answers:{
            a: "Frozen",
            b: "Ice Age",
            c: "Snow White and the Seven Dwarfs",
            d: "The Snow Queen",
        },
        correct: "Frozen",
        letter: "a",
    },
   
    
]

//global variables
var myTimer, letter, num, timeLeft, y;
var unanswered = 0;
var correct = 0;
var incorrect = 0;
var qCount = 0;

// var questionTitle = "Can you guess the movie from the emojis?"

$(document).on(' touchstart click', '.start', function(e){
    e.stopPropagation(); 
    e.preventDefault();
    // randomizes the array of movies
    movies.sort(function() { return 0.5 - Math.random() });
    $(this).hide();
    $('#ticketContainer, #filmContainer, #qNum, #timer, #emoji').show();
    $('#results').hide();
    currentQuestion(qCount);
    
});

function currentQuestion(count){
    // adds question number to the side ot the ticket stub
    $('#qNum').html("Q. No. " + (qCount+1) + " / 10")
    $('.choice').removeClass('correctAnswer incorrectAnswer');

    // adds the hov class that causes the answer choice to hover
    $('.choice').addClass('hov');

    y = true;

    // displays the question if there are questions left to answer
    if (count < (movies.length/2)){
        timeLeft = 20;
        $('#timer').removeClass('correctHeader incorrectHeader').css('color', '#000000');
        // $('#timer').text("Time Remaining: " + timeLeft + ' seconds');
        // myTimer = setInterval(countdown, 1000);
        $('#emoji').html(movies[count].question);
        $('#a').html(movies[count].answers.a);
        $('#b').html(movies[count].answers.b);
        $('#c').html(movies[count].answers.c);
        $('#d').html(movies[count].answers.d);
        letter = movies[count].letter;

    }
    //after all questions have been shown then show the Trivia Game Complete screen
    else{
        $('#qNum, #timer, #emoji, #filmContainer').hide();
        $('#results, #playAgain').show();
        $("#playAgain").css('display', 'flex');
        $('#corNum').html(correct);
        $('#incorNum').html(incorrect);
        $('#unNum').html(unanswered);
        // randomizes the array of movies
        movies.sort(function() { return 0.5 - Math.random() });


        qCount = 0;
        unanswered = 0;
        correct = 0;
        incorrect = 0;

    }

}

// countdown function that either has text showing the Time Remaining in seconds or Time's Up if no answer choice was selected
function countdown() {
    if (timeLeft == 1) {
        clearTimeout(myTimer);
        $('#timer').text("Time's Up!");
        $('.choice').removeClass('hov');
        noAnswerSelected();

    } else {
        //timeLeft is decreased before displaying the timer text which fixed the lag.
        timeLeft--;
        $('#timer').text("Time Remaining: " + timeLeft + ' seconds');
        
        if(timeLeft <= 5){
            $('#timer').css('color', '#e30404'); 
        }

    }
}

// if no answer was selected by the user
//methods used are setTimeout and addClass
function noAnswerSelected(){ 
    y = false;
    $("#"+letter).addClass('correctAnswer');
    unanswered ++;
    qCount++;
    setTimeout(function(){
        currentQuestion(qCount)
    }, 4000);
    
    
}

//on click of the element with class 'choice'( div with the answer choice) then clear the timer and check if answer choice is correct or incorrect
$(document).on(' touchstart click', '.choice', function (e){
    e.stopPropagation(); 
    e.preventDefault();
    $('.choice').removeClass('hov');
    clearTimeout(myTimer);

    // if y is true then user can select an answer choice
    if(y){

        if($(this).attr('id') == letter){
            y = false;
            $('#timer').text("That's Correct!").addClass('correctHeader');
            $("#"+letter).addClass('correctAnswer');
            correct ++;
            qCount++;
            setTimeout(function(){
                currentQuestion(qCount)
            }, 4000);
        }
        else{
            y = false;
            $('#timer').text("Nope. That's Incorrect.").addClass('incorrectHeader');
            $("#"+letter).addClass('correctAnswer');
            $(this).addClass('incorrectAnswer');
            incorrect ++;
            qCount++
            setTimeout(function(){
                currentQuestion(qCount)
            }, 4000);
        }
    }
        
});

